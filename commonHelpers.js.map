{"version":3,"file":"commonHelpers.js","sources":["../src/favorites.js"],"sourcesContent":["import './js/modal-menu';\nimport './js/arrow-button';\nimport './js/exercises-modal';\nimport './js/modal-rating';\nimport axios from 'axios';\nimport { chooseButtonForModal } from './js/exercises-modal';\n// axios.defaults.baseURL;\naxios.defaults.baseURL = 'https://energyflow.b.goit.study/api/';\n\n// ---------ELEMENTS OBJECT---------\nconst elements = {\n  quoteText: document.querySelector('.js-quote-text'),\n  quoteAuthor: document.querySelector('.js-quote-author'),\n};\nconst { quoteText, quoteAuthor } = elements;\nconst resultList = document.createElement('ul');\nconst backdrop = document.querySelector('[data-exercise-modal]');\nresultList.classList.add('search-result-list');\nresultList.id = 'scrollTry';\n// ---------SECTION QUOTE---------\n\n// Get date from LS\nconst QUOTE_LS_KEY = 'info';\nconst qoteLS = JSON.parse(localStorage.getItem(QUOTE_LS_KEY));\n\nconst currentDate = new Date().getDate();\nconst currentMonth = new Date().getMonth();\n\n// Checking the data in LS for null, comparing Dates\nif (qoteLS === null) {\n  requestQuote('quote');\n} else if (currentDate !== qoteLS.date) {\n  requestQuote('quote');\n} else if (currentMonth !== qoteLS.month) {\n  requestQuote('quote');\n} else {\n  quoteText.textContent = qoteLS.quote;\n  quoteAuthor.textContent = qoteLS.author;\n}\n\n// Request function for Qote\nasync function requestQuote(endPoint) {\n  try {\n    // request\n    const response = await axios.get(`${endPoint}`);\n    const {\n      data: { author, quote },\n    } = response;\n\n    //   Write the response to the object\n    const objQote = {\n      author: author,\n      quote: quote,\n      date: currentDate,\n      month: currentMonth,\n    };\n\n    // Record in LS from API\n    localStorage.setItem(QUOTE_LS_KEY, JSON.stringify(objQote));\n\n    // Record in the markup\n    quoteText.textContent = objQote.quote;\n    quoteAuthor.textContent = objQote.author;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// -----------SECTION FAVORITES------------\n\nconst favorContent = document.querySelector('.js-favor-content');\n\n// Получение данных из LS\nconst FAVORITES_LS_KEY = 'exerciseItems';\nconst favorExercLS = JSON.parse(localStorage.getItem(FAVORITES_LS_KEY));\n\n// Разметка для заглушки\nconst markupPlug =\n  '<div class=\"favor-plug-wrap\"><div class=\"favor-icon-wrap\"><img class=\"favor-icon-item\" src=\"/project-dev-hunters/assets/dumbbell-desktop-dca4f14b.png\" alt=\"\"></div><div class=\"favor-text\">It appears that you haven&#8216t added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future</div></div>';\n\nfunction createMarkupNonFavExers() {\n  favorContent.innerHTML = markupPlug;\n}\n// Шаблон разметка для карточек с упраженениями\n// Прверкa на null (если нет данных в LS с таким ключом) и на длину массива\n\nif (favorExercLS === null) {\n  createMarkupNonFavExers();\n} else if (favorExercLS !== null && favorExercLS.length === 0) {\n  createMarkupNonFavExers();\n} else if (favorExercLS.length > 0) {\n  createMakrUpForFavorite(favorExercLS);\n  addListenersForButtons();\n  chooseButtonForModal();\n  addRemoveScroll();\n}\n\n// custom way \"/project-dev-hunters/assets/sprite-f8222074.svg#rating-star\"\n// Функция для разметки из массива объектов упражнений\nexport function createMakrUpForFavorite(arr) {\n  resultList.innerHTML = arr\n    .map(({ bodyPart, name, target, burnedCalories, time, _id }) => {\n      return `<li class=exercises-serch-result>\n      <div class=\"rating-start-container\">\n        <div class=\"rating\">\n            <p class=\"workout\">Workout</p>\n            <div class=\"rating-cont\">\n              <button type=\"button\" data-id=${_id} data-delete-from-favorites>\n                <svg class=\"icon-trash-svg\" width=\"16\" height=\"16\">\n                    <use href=\"/project-dev-hunters/assets/sprite-f8222074.svg#icon-trash\"></use>\n                </svg>\n              </button>\n            </div>\n        </div>\n        <div class=\"start-button-container\">\n            <button type=\"button\" data-id=${_id} data-exercise-modal-open>Start\n                <svg class=\"start-svg\" width=\"18\" height=\"18\">\n                    <use href=\"/project-dev-hunters/assets/sprite-f8222074.svg#icon-arrow-right\"></use>\n                </svg>\n            </button>\n        </div>\n      </div>\n      <div class=\"info-about-exercise\">\n        <div class=\"exercise-name\">\n            <svg class=\"runnig-svg\" width=\"24\" height=\"24\">\n                <use href=\"/project-dev-hunters/assets/sprite-f8222074.svg#running-man\"></use>\n            </svg>\n            <h2>${name[0].toUpperCase() + name.slice(1)}</h2>\n        </div>\n        <div class=\"additional-information\">\n            <p class=>Burned calories: <span class=\"info-from-back\">${burnedCalories} / ${time} min</span></p>\n            <p class=>Body part: <span class=\"info-from-back\">${\n              bodyPart[0].toUpperCase() + bodyPart.slice(1)\n            }</span></p>\n            <p class=>Target: <span class=\"info-from-back\">${\n              target[0].toUpperCase() + target.slice(1)\n            }</span></p>\n        </div>\n     \n          </li>`;\n    })\n    .join('');\n  favorContent.innerHTML = '';\n  favorContent.prepend(resultList);\n}\n\n//LISTENERS FOR BUTTONS\n\nexport function addListenersForButtons() {\n  const deleteButtons = document.querySelectorAll(\n    '[data-delete-from-favorites]'\n  );\n  deleteButtons.forEach(button => {\n    button.addEventListener('click', removeItemForFavorites);\n  });\n}\n// Функция для разметки, если нет упраженений, выводит сообщение\n// remove item from favorites\n\nfunction removeItemForFavorites(event) {\n  const tagretId = event.currentTarget.dataset.id;\n  const currentFavor = JSON.parse(\n    localStorage.getItem(FAVORITES_LS_KEY)\n  ).filter(({ _id: id }) => {\n    if (id !== tagretId) return true;\n  });\n  localStorage.setItem(FAVORITES_LS_KEY, JSON.stringify(currentFavor));\n  if (currentFavor.length === 0) {\n    createMarkupNonFavExers();\n    return;\n  }\n  createMakrUpForFavorite(currentFavor);\n  addListenersForButtons();\n  chooseButtonForModal();\n  addRemoveScroll();\n}\n//\n//SCROLL FUNCTION\n//\nexport function addRemoveScroll() {\n  if (\n    window.innerWidth >= 768 &&\n    window.innerWidth < 1440 &&\n    resultList.children.length > 8\n  ) {\n    classAddScroll();\n  } else if (window.innerWidth >= 1440 && resultList.children.length > 9) {\n    classAddScroll();\n  } else {\n    classRemoveScroll();\n  }\n}\n\nfunction classAddScroll() {\n  resultList.classList.add('scroll-on');\n  resultList.classList.add('padding-for-scroll-list');\n  document\n    .querySelector('.favor-wrapper')\n    .classList.add('padding-for-scroll-container');\n}\n\nfunction classRemoveScroll() {\n  resultList.classList.remove('scroll-on');\n  resultList.classList.remove('padding-for-scroll-list');\n  document\n    .querySelector('.favor-wrapper')\n    .classList.remove('padding-for-scroll-container');\n}\n\n// COSTYL v3\nbackdrop.addEventListener('mouseout', () => {\n  createMakrUpForFavorite(JSON.parse(localStorage.getItem(FAVORITES_LS_KEY)));\n  addListenersForButtons();\n  chooseButtonForModal();\n  addRemoveScroll();\n  if (JSON.parse(localStorage.getItem(FAVORITES_LS_KEY)) === null) {\n    createMarkupNonFavExers();\n  } else if (\n    JSON.parse(localStorage.getItem(FAVORITES_LS_KEY)) !== null &&\n    JSON.parse(localStorage.getItem(FAVORITES_LS_KEY)).length === 0\n  ) {\n    createMarkupNonFavExers();\n  }\n});\n// Объект с информацией по упражнению\n// {\n//   \"_id\": \"64f389465ae26083f39b17a2\",\n//   \"bodyPart\": \"waist\",\n//   \"equipment\": \"body weight\",\n//   \"gifUrl\": \"https://ftp.goit.study/img/power-pulse/gifs/0001.gif\",\n//   \"name\": \"3/4 sit-up\",\n//   \"target\": \"abs\",\n//   \"description\": \"This refers to your core muscles, which include the rectus abdominis, obliques, and transverse abdominis. They're essential for maintaining posture, stability, and generating force in many movements. Exercises that target the abs include crunches, leg raises, and planks.\",\n//   \"rating\": 3.49,\n//   \"burnedCalories\": 220,\n//   \"time\": 3,\n//   \"popularity\": 9953\n// }\n"],"names":["axios","elements","quoteText","quoteAuthor","resultList","backdrop","QUOTE_LS_KEY","qoteLS","currentDate","currentMonth","requestQuote","endPoint","response","author","quote","objQote","error","favorContent","FAVORITES_LS_KEY","favorExercLS","markupPlug","createMarkupNonFavExers","createMakrUpForFavorite","addListenersForButtons","chooseButtonForModal","addRemoveScroll","arr","bodyPart","name","target","burnedCalories","time","_id","button","removeItemForFavorites","event","tagretId","currentFavor","id","classAddScroll","classRemoveScroll"],"mappings":"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"}